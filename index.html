<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>√îN T·∫¨P H√ìA H·ªåC 10 - CU·ªêI K·ª≤ I</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: { 
                extend: { 
                    colors: { 
                        primary: '#1C3FAA', 
                        success: '#91C714', 
                        danger: '#D32929',
                        pink: '#EC4899',
                        green: '#10B981',
                        blue: '#3B82F6',
                        red: '#EF4444',
                        purple: '#8B5CF6'
                    } 
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary-color: #1C3FAA;
            --success-color: #91C714;
            --danger-color: #D32929;
            --bg-color: #f8fafc;
            --card-bg: white;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }
        
        [data-theme="pink"] {
            --primary-color: #EC4899;
            --success-color: #10B981;
            --danger-color: #EF4444;
        }
        
        [data-theme="green"] {
            --primary-color: #10B981;
            --success-color: #EC4899;
            --danger-color: #EF4444;
        }
        
        [data-theme="blue"] {
            --primary-color: #3B82F6;
            --success-color: #10B981;
            --danger-color: #EF4444;
        }
        
        [data-theme="red"] {
            --primary-color: #EF4444;
            --success-color: #10B981;
            --danger-color: #EC4899;
        }
        
        [data-theme="purple"] {
            --primary-color: #8B5CF6;
            --success-color: #10B981;
            --danger-color: #EF4444;
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg-color); 
            margin: 0; 
            overflow-x: hidden;
            position: relative;
            touch-action: manipulation; /* T·ªëi ∆∞u touch cho mobile */
            -webkit-tap-highlight-color: transparent; /* X√≥a highlight tap tr√™n iOS/Android */
        }
        
        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(-45deg, var(--primary-color), var(--primary-color)80%, #ffffff20);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        .animated-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(120,119,198,0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255,119,198,0.3) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(120,219,255,0.3) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 16px; 
            position: relative;
            z-index: 1;
        }
        
        .card { 
            background: var(--card-bg); 
            border-radius: 20px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1), 0 0 0 1px rgba(255,255,255,0.2); 
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.3);
        }
        
        .header { 
            background: linear-gradient(135deg, var(--primary-color), rgba(28,63,170,0.8)); 
            color: white; 
            padding: 40px 24px; 
            text-align: center;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .header .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: url('https://i.ibb.co/HfM9CsK/V-1.png') no-repeat center/cover;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .mode-card { 
            padding: 50px 24px; 
            text-align: center;
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            backdrop-filter: blur(20px);
        }
        
        .mode-btn {
            display: block; 
            width: 100%; 
            max-width: 450px; 
            margin: 20px auto;
            padding: 24px; 
            border-radius: 20px; 
            font-size: 18px; 
            font-weight: 600;
            background: rgba(255,255,255,0.95); 
            border: 2px solid rgba(28,63,170,0.2); 
            color: var(--primary-color); 
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .mode-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .mode-btn:hover { 
            border-color: var(--primary-color); 
            transform: translateY(-8px) scale(1.02); 
            box-shadow: 0 20px 40px rgba(28,63,170,0.2); 
        }
        
        .mode-btn:hover::before {
            left: 100%;
        }
        
        .question-card { 
            padding: 40px 24px; 
            background: rgba(255,255,255,0.95);
        }
        
        .question-num { 
            font-size: 28px; 
            font-weight: 800; 
            color: var(--primary-color); 
            margin-bottom: 20px; 
            text-align: center;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .question-text { 
            font-size: 18px; 
            line-height: 1.7; 
            margin-bottom: 30px; 
            color: var(--text-primary);
        }
        
        .question-image { 
            max-width: 100%; 
            border-radius: 16px; 
            margin: 20px 0; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            border: 1px solid rgba(255,255,255,0.5);
        }
        
        .option { 
            background: rgba(248,250,252,0.8); 
            border: 2px solid rgba(226,232,240,0.8); 
            border-radius: 16px; 
            padding: 24px; 
            font-size: 17px; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            display: flex; 
            align-items: center; 
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-color);
            transform: scaleY(0);
            transition: transform 0.3s;
        }
        
        .option input { 
            margin-right: 16px; 
            transform: scale(1.3); 
            accent-color: var(--primary-color); 
        }
        
        .option:hover { 
            background: rgba(238,242,255,0.8); 
            border-color: var(--primary-color); 
            transform: translateX(8px);
        }
        
        .option:hover::before {
            transform: scaleY(1);
        }
        
        .option.selected { 
            background: rgba(224,231,255,0.9); 
            border-color: var(--primary-color); 
        }
        
        .option.correct { 
            background: rgba(212,237,218,0.9); 
            border-color: var(--success-color); 
            transform: scale(1.02);
        }
        
        .option.wrong { 
            background: rgba(252,232,232,0.9); 
            border-color: var(--danger-color); 
        }
        
        .submit-btn { 
            width: 100%; 
            padding: 20px; 
            background: linear-gradient(135deg, var(--primary-color), rgba(28,63,170,0.8)); 
            color: white; 
            border: none; 
            border-radius: 16px; 
            font-size: 19px; 
            font-weight: 600; 
            margin-top: 32px; 
            cursor: pointer; 
            box-shadow: 0 10px 30px rgba(28,63,170,0.3); 
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(28,63,170,0.4);
        }
        
        .feedback { 
            margin-top: 24px; 
            padding: 24px; 
            border-radius: 16px; 
            font-size: 20px; 
            text-align: center; 
            font-weight: 700; 
            backdrop-filter: blur(10px);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .feedback.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .feedback.correct { 
            background: rgba(212,237,218,0.9); 
            color: #155724; 
            border: 1px solid var(--success-color);
        }
        
        .feedback.wrong { 
            background: rgba(252,232,232,0.9); 
            color: #721c24; 
            border: 1px solid var(--danger-color);
        }
        
        .progress { 
            margin: 24px 0; 
            text-align: center; 
            font-size: 18px; 
            color: var(--primary-color); 
            font-weight: 600; 
        }
        
        .hidden { display: none; }
        .streak { 
            font-size: 36px; 
            font-weight: 800; 
            background: linear-gradient(135deg, var(--primary-color), #60a5fa); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
        }
        
        .short-question { 
            background: rgba(255,255,255,0.95); 
            border-radius: 16px; 
            padding: 20px; 
            margin: 20px 0; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.08); 
            border: 1px solid rgba(255,255,255,0.5);
        }
        
        .short-question b { 
            display: block; 
            margin-bottom: 12px; 
            font-size: 17px; 
            color: var(--primary-color); 
            font-weight: 600;
        }
        
        .short-inputs { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 12px; 
        }
        
        .short-inputs input { 
            width: 60px; 
            padding: 12px; 
            font-size: 16px; 
            text-align: center; 
            border-radius: 10px; 
            border: 2px solid rgba(226,232,240,0.8); 
            transition: border-color 0.3s;
        }
        
        .short-inputs input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(28,63,170,0.1);
        }
        
        .short-result { 
            margin-top: 12px; 
            font-weight: 600; 
            font-size: 16px; 
        }
        
        .essay-question { 
            background: rgba(255,255,255,0.95); 
            border-radius: 16px; 
            padding: 20px; 
            margin: 20px 0; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.08); 
            border: 1px solid rgba(255,255,255,0.5);
        }
        
        .essay-question b { 
            display: block; 
            margin-bottom: 12px; 
            font-size: 17px; 
            color: var(--primary-color); 
            font-weight: 600;
        }
        
        textarea { 
            width: 100%; 
            height: 160px; 
            padding: 16px; 
            font-size: 16px; 
            border-radius: 12px; 
            border: 2px solid rgba(226,232,240,0.8); 
            box-sizing: border-box; 
            margin-top: 8px;
            resize: vertical;
            transition: border-color 0.3s;
            font-family: 'Inter', sans-serif;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(28,63,170,0.1);
        }
        
        .essay-answer { 
            display: none; 
            margin-top: 16px; 
            background: rgba(232,244,255,0.8); 
            padding: 16px; 
            border-left: 4px solid var(--primary-color); 
            border-radius: 12px; 
            font-size: 16px;
            backdrop-filter: blur(10px);
        }
        
        .essay-answer b { 
            color: var(--primary-color); 
            font-weight: 600;
        }
        
        /* Settings Button */
        .settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255,255,255,0.95);
            padding: 8px 12px;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .settings-btn:hover {
            transform: rotate(90deg);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .settings-icon {
            width: 24px;
            height: 24px;
            background: url('https://cdn-icons-png.flaticon.com/512/2040/2040504.png') no-repeat center;
            background-size: contain;
        }
        
        /* Setting Overlay */
        .setting-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .setting-overlay.show {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Theme Selector */
        .theme-selector {
            background: rgba(255,255,255,0.95);
            padding: 24px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.5);
            text-align: center;
        }
        
        .theme-selector h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }
        
        .theme-btn {
            display: inline-block;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            margin: 0 6px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .theme-btn.active {
            border-color: var(--primary-color);
            transform: scale(1.15);
        }
        
        .theme-btn:hover {
            transform: scale(1.15);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .question-num { font-size: 24px; }
            .mode-card { padding: 30px 16px; }
            .question-card { padding: 24px 16px; }
            .short-inputs { justify-content: center; }
            .theme-selector { 
                padding: 20px; 
            }
            .settings-btn { right: 10px; }
            .option { padding: 16px; font-size: 15px; }
            .submit-btn { font-size: 17px; padding: 16px; }
            .textarea { height: 120px; font-size: 14px; }
        }
        
        @media (max-width: 480px) {
            .container { padding: 8px; }
            .mode-btn { padding: 20px; font-size: 16px; }
            .header { padding: 30px 16px; }
            .short-inputs input { width: 50px; padding: 8px; }
            .theme-btn { width: 30px; height: 30px; margin: 0 4px; }
        }
                /* Modal chung */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
            -webkit-tap-highlight-color: transparent;
        }
        
        .modal-overlay.show {
            display: flex;
        }
        
        .modal {
            background: white;
            border-radius: 20px;
            padding: 32px 24px;
            max-width: 90%;
            width: 400px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .modal.show {
            transform: scale(1);
            opacity: 1;
        }
        
        .modal-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
        }
        
        .modal-message {
            font-size: 17px;
            color: var(--text-secondary);
            margin-bottom: 32px;
            line-height: 1.5;
        }
        
        .modal-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 14px 32px;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            min-width: 120px;
            transition: all 0.3s;
        }
        
        .modal-btn.cancel {
            background: #e2e8f0;
            color: #64748b;
        }
        
        .modal-btn.cancel:hover {
            background: #cbd5e1;
        }
        
        .modal-btn.confirm {
            background: var(--primary-color);
            color: white;
        }
        
        .modal-btn.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        /* Responsive cho mobile */
        @media (max-width: 480px) {
            .modal {
                padding: 24px 16px;
                width: 95%;
            }
            .modal-title {
                font-size: 20px;
            }
            .modal-message {
                font-size: 16px;
            }
            .modal-buttons {
                flex-direction: column;
            }
            .modal-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
        <!-- Modal c·∫£nh b√°o ch∆∞a ch·ªçn ƒë√°p √°n -->
    <div class="modal-overlay" id="alert-modal">
        <div class="modal">
            <div class="modal-icon">‚ö†Ô∏è</div>
            <div class="modal-title">Ch∆∞a ch·ªçn ƒë√°p √°n!</div>
            <div class="modal-message">Vui l√≤ng ch·ªçn m·ªôt ƒë√°p √°n tr∆∞·ªõc khi n·ªôp c√¢u nh√©!</div>
            <div class="modal-buttons">
                <button class="modal-btn confirm" id="alert-ok">OK</button>
            </div>
        </div>
    </div>

    <!-- Modal x√°c nh·∫≠n n·ªôp b√†i (ch·∫ø ƒë·ªô thi) -->
    <div class="modal-overlay" id="confirm-modal">
        <div class="modal">
            <div class="modal-icon">üì§</div>
            <div class="modal-title">X√°c nh·∫≠n n·ªôp b√†i?</div>
            <div class="modal-message">
                B·∫°n ƒë√£ s·∫µn s√†ng n·ªôp b√†i ch∆∞a?<br>
                Sau khi n·ªôp s·∫Ω kh√¥ng th·ªÉ s·ª≠a l·∫°i n·ªØa ƒë·∫•y!
            </div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="confirm-cancel">H·ªßy</button>
                <button class="modal-btn confirm" id="confirm-submit">N·ªôp b√†i</button>
            </div>
        </div>
    </div>
    <!-- Animated Background -->
    <div class="animated-bg"></div>
    
    <!-- Settings Button -->
    <div class="settings-btn" id="settings-btn">
        <div class="settings-icon"></div>
    </div>
    
    <!-- Setting Overlay -->
    <div class="setting-overlay" id="setting-overlay">
        <div class="theme-selector">
            <h3>Ch·ªçn M√†u Ch·ªß ƒê·∫°o</h3>
            <div class="theme-btn active" style="background: #1C3FAA;" data-theme="default" title="Xanh D∆∞∆°ng"></div>
            <div class="theme-btn" style="background: #EC4899;" data-theme="pink" title="H·ªìng"></div>
            <div class="theme-btn" style="background: #10B981;" data-theme="green" title="Xanh L√°"></div>
            <div class="theme-btn" style="background: #3B82F6;" data-theme="blue" title="Xanh D∆∞∆°ng Nh·∫°t"></div>
            <div class="theme-btn" style="background: #EF4444;" data-theme="red" title="ƒê·ªè"></div>
            <div class="theme-btn" style="background: #8B5CF6;" data-theme="purple" title="T√≠m"></div>
        </div>
    </div>
    
    <div class="container pt-8">
        <div class="card header mb-8">
            <div class="avatar">
    <img src="https://i.ibb.co/HfM9CsKV/V-1.png" alt="Avatar" class="w-full h-full object-cover rounded-full">
</div>
            <h1>√îN T·∫¨P H√ìA H·ªåC L·ªöP 10</h1>
            <small class="text-white/80">Cu·ªëi K·ª≥ I - 2025</small>
        </div>
        <!-- Ch·ªçn ch·∫ø ƒë·ªô -->
        <div id="mode-selection" class="card mode-card">
            <h2 class="text-3xl font-bold text-[var(--primary-color)] mb-8">Ch·ªçn ch·∫ø ƒë·ªô l√†m b√†i</h2>
            <button class="mode-btn" id="mode-exam">
                <div class="text-3xl mb-4">üìù</div>
                <div class="text-xl font-bold">Ch·∫ø ƒë·ªô thi</div>
                <p class="text-[var(--text-secondary)] mt-4">L√†m h·∫øt ƒë·ªÅ (tr·∫Øc nghi·ªám + tr·∫£ l·ªùi ng·∫Øn + t·ª± lu·∫≠n)</p>
            </button>
            <button class="mode-btn" id="mode-challenge">
                <div class="text-3xl mb-4">‚öîÔ∏è</div>
                <div class="text-xl font-bold">Ch·∫ø ƒë·ªô th·ª≠ th√°ch</div>
                <p class="text-[var(--text-secondary)] mt-4">Tr·∫Øc nghi·ªám + tr·∫£ l·ªùi ng·∫Øn, sai l√† l√†m l·∫°i t·ª´ ƒë·∫ßu</p>
            </button>
        </div>
        <!-- Khu v·ª±c l√†m b√†i -->
        <div id="quiz-area" class="hidden">
            <!-- Ch·∫ø ƒë·ªô thi -->
            <div id="exam-mode" class="hidden">
                <div id="exam-questions"></div>
                <h2 class="text-3xl font-bold text-[var(--primary-color)] mt-12 mb-6">PH·∫¶N TR·∫¢ L·ªúI NG·∫ÆN</h2>
                <div id="exam-short"></div>
                <h2 class="text-3xl font-bold text-[var(--primary-color)] mt-12 mb-6">PH·∫¶N T·ª∞ LU·∫¨N</h2>
                <div id="exam-essay"></div>
                <button class="submit-btn" id="submit-exam">N·ªôp B√†i & Ch·∫•m ƒêi·ªÉm</button>
                <div id="exam-result" class="hidden card mt-8 text-center py-12">
                    <h2 class="text-3xl font-bold text-[var(--primary-color)] mb-6">K·∫øt qu·∫£</h2>
                    <div id="exam-result-text" class="text-4xl font-bold mb-8"></div>
                    <button class="submit-btn mt-8" id="back-to-mode">Quay l·∫°i ch·ªçn ch·∫ø ƒë·ªô</button>
                </div>
            </div>
            <!-- Ch·∫ø ƒë·ªô th·ª≠ th√°ch -->
            <div id="challenge-mode" class="hidden">
                <div class="card question-card">
                    <div class="progress" id="challenge-progress"></div>
                    <div class="text-center mb-6">
                        <div class="streak" id="current-streak">0</div>
                        <div class="text-lg text-[var(--text-secondary)]">Chu·ªói ƒë√∫ng li√™n ti·∫øp</div>
                    </div>
                    <div id="current-question"></div>
                    <div id="current-short" class="hidden"></div>
                    <button class="submit-btn hidden" id="submit-current">N·ªôp C√¢u N√†y</button>
                    <button class="submit-btn hidden" id="next-question">C√¢u Ti·∫øp Theo</button>
                    <div id="challenge-feedback" class="feedback hidden"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Image bank -->
    <div id="image-bank" style="display:none">
        <img src="https://i.ibb.co/Sw4C8SD3/31.png" alt="31">
        <img src="https://i.ibb.co/SDDQQHGy/32.png" alt="32">
        <img src="https://i.ibb.co/pjSn6hht/41.jpg" alt="41">
        <img src="https://i.ibb.co/wjtR0Fm/42.png" alt="42">
        <img src="https://i.ibb.co/7JrkCdBQ/34-a.png" alt="34 a">
        <img src="https://i.ibb.co/Nnt0Hp6Q/34-b.png" alt="34 b">
        <img src="https://i.ibb.co/nqVH6j2P/34-c.png" alt="34 c">
        <img src="https://i.ibb.co/DfgbYYDf/34-d.png" alt="34 d">
    </div>
    <script>
        // Discord Webhook URL - Thay b·∫±ng webhook th·ª±c c·ªßa b·∫°n
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1452163646766579753/zbvqQ_sMaQmpCxcftbdAGw5LQ-o_ihmSC98HyTqmtmpJCNE7Qmu8sWADU_BsoCwMsyYu'; // Placeholder, thay b·∫±ng URL th·ª±c

        // G·ª≠i d·ªØ li·ªáu ƒë·∫øn Discord
        // G·ª≠i d·ªØ li·ªáu ƒë·∫øn Discord (c√≥ th√™m IP)
async function sendToDiscord(data) {
    try {
        const ip = await getPublicIP(); // L·∫•y IP c√¥ng khai
        const mode = data.mode === 'Exam' ? 'B√†i Thi' : 'Thi ƒë·∫•u';
        const chuoi = data.mode === 'Exam' ? data.score : data.streak;
        const time = new Date().toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' });

        await fetch(DISCORD_WEBHOOK_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                content: null,
                embeds: [{
                    title: "üìä K·∫øt qu·∫£ l√†m b√†i H√≥a h·ªçc 10",
                    color: mode === 'B√†i Thi' ? 3447003 : 1752220, // M√†u xanh d∆∞∆°ng / v√†ng
                    fields: [
                        { name: "M√¥n", value: "#hoahoc", inline: true },
                        { name: "Mode", value: mode, inline: true },
                        { name: "Chu·ªói / ƒêi·ªÉm", value: `${chuoi}`, inline: true },
                        { name: "Th·ªùi Gian", value: time, inline: false },
                        { name: "IP Ng∆∞·ªùi L√†m", value: `\`\`\`${ip}\`\`\``, inline: false }
                    ],
                    footer: {
                        text: "√în t·∫≠p H√≥a h·ªçc 10 - Cu·ªëi K·ª≥ I 2025"
                    },
                    timestamp: new Date().toISOString()
                }]
            })
        });
    } catch (error) {
        console.error('L·ªói g·ª≠i Discord:', error);
    }
}

        // Theme Management
        const themes = ['default', 'pink', 'green', 'blue', 'red', 'purple'];
        let currentTheme = 'default';
        
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.dataset.theme;
                document.documentElement.setAttribute('data-theme', theme);
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTheme = theme;
                // Update CSS variables
                document.documentElement.style.setProperty('--primary-color', getComputedStyle(btn).backgroundColor);
            });
        });
        
        // Toggle Setting Overlay with Settings Button
        const settingsBtn = document.getElementById('settings-btn');
        const settingOverlay = document.getElementById('setting-overlay');
        
        settingsBtn.addEventListener('click', () => {
            settingOverlay.classList.toggle('show');
        });

        // Close overlay when clicking outside
        settingOverlay.addEventListener('click', (e) => {
            if (!document.querySelector('.theme-selector').contains(e.target)) {
                settingOverlay.classList.remove('show');
            }
        });

        // Rest of the script remains the same...
const questions = [
    {q:"C√¢u 1. C√°c nguy√™n t·ªë x·∫øp ·ªü chu k√¨ 6 c√≥ s·ªë l·ªõp electron trong nguy√™n t·ª≠ l√†",o:["A. 5","B. 6","C. 3","D. 7"],c:1},
    {q:"C√¢u 2. Trong b·∫£ng tu·∫ßn ho√†n c√°c nguy√™n t·ªë, s·ªë chu k√¨ nh·ªè v√† chu k√¨ l·ªõn l√†",o:["A. 3 v√† 3","B. 4 v√† 4","C. 4 v√† 3","D. 3 v√† 4"],c:3},
    {q:"C√¢u 3. S·ªë nguy√™n t·ªë trong chu k√¨ 3 v√† chu k√¨ 5 l√†",o:["A. 18 v√† 8","B. 8 v√† 10","C. 8 v√† 18","D. 6 v√† 8"],c:2},
    {q:"C√¢u 4. B·∫£ng tu·∫ßn ho√†n hi·ªán nay c√≥ s·ªë chu k√¨ v√† s·ªë h√†ng ngang l·∫ßn l∆∞·ª£t l√†",o:["A. 7 v√† 9","B. 7 v√† 8","C. 7 v√† 7","D. 6 v√† 7"],c:1},
    {q:"C√¢u 5. C√°c nguy√™n t·ªë trong c√πng m·ªôt chu k√¨ c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨ chung.",o:["A. S·ªë electron l·ªõp ngo√†i c√πng b·∫±ng nhau","B. S·ªë electron ho√° tr·ªã b·∫±ng nhau","C. T·∫•t c·∫£ ƒë√∫ng","D. S·ªë l·ªõp electron b·∫±ng nhau"],c:3},
    {q:"C√¢u 6. C√°c nguy√™n t·ªë trong c√πng m·ªôt nh√≥m A (tr·ª´ He) c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨ chung?",o:["A. S·ªë electron ho√° tr·ªã b·∫±ng nhau","B. S·ªë electron l·ªõp ngo√†i c√πng b·∫±ng nhau","C. C√≥ t√≠nh ch·∫•t ho√° h·ªçc gi·ªëng nhau","D. T·∫•t c·∫£ ƒë√∫ng"],c:3},
    {q:"C√¢u 7. Nguy√™n t·ª≠ c·ªßa nh·ªØng nguy√™n t·ªë trong m·ªôt nh√≥m ƒë·ªÅu c√≥ c√πng s·ªë :",o:["A. Proton","B. Neutron","C. L·ªõp electron","D. Electron h√≥a tr·ªã"],c:3},
    {q:"C√¢u 8. C√°c nguy√™n t·ªë ho√° h·ªçc trong b·∫£ng tu·∫ßn ho√†n ƒë∆∞·ª£c s·∫Øp x·∫øp theo nguy√™n t·∫Øc :",o:["A. C√°c nguy√™n t·ªë c√≥ c√πng s·ªë l·ªõp electron trong nguy√™n t·ª≠ ƒë∆∞·ª£c x·∫øp c√πng m·ªôt h√†ng","B. C√°c nguy√™n t·ªë c√≥ c√πng s·ªë electron ho√° tr·ªã trong nguy√™n t·ª≠ ƒë∆∞·ª£c x·∫øp th√†nh m·ªôt c·ªôt","C. C√°c nguy√™n.t·ªë ƒë∆∞·ª£c s·∫Øp theo theo chi·ªÅu tƒÉng d·∫ßn c·ªßa ƒëi·ªán t√≠ch h·∫°t nh√¢n nguy√™n t·ª≠","D. C·∫£ A, B, C ƒë√∫ng"],c:3},
    {q:"C√¢u 9. S·ªë c√°c nguy√™n t·ªë trong c√°c chu k√¨ 1,2,3 v√† 4 l·∫ßn l∆∞·ª£t b·∫±ng:",o:["A. 1,8,18,32","B. 2,8,8,18","C. 2,8,18,18","D. 2,8,18,32"],c:3},
    {q:"C√¢u 10. C·∫•u h√¨nh electron c·ªßa nguy√™n t·ª≠ oxygen l√† 1s¬≤2s¬≤2p‚Å¥. V·ªã tr√≠ c·ªßa oxygen trong b·∫£ng tu·∫ßn ho√†n l√†",o:["A. √¥ s·ªë 6, chu k√¨ 2, nh√≥m VIA","B. √¥ s·ªë 6, chu k√¨ 3, nh√≥m VIB","C. √¥ s·ªë 8, chu k√¨ 2, nh√≥m VIA","D. √¥ s·ªë 8, chu k√¨ 2, nh√≥m VIB"],c:2},
    {q:"C√¢u 11. C·∫•u h√¨nh electron c·ªßa nguy√™n t·ª≠ s·∫Øt l√† 1s¬≤2s¬≤2p‚Å∂3s¬≤3p‚Å∂3d‚Å∂4s¬≤. V·ªã tr√≠ c·ªßa s·∫Øt trong b·∫£ng tu·∫ßn ho√†n l√†",o:["A. √¥ s·ªë 26, chu k√¨ 3, nh√≥m VIIIB","B. √¥ s·ªë 26, chu k√¨ 3, nh√≥m VIIIA","C. √¥ s·ªë 26, chu k√¨ 4, nh√≥m VIIIA","D. √¥ s·ªë 26, chu k√¨ 4, nh√≥m VIIIB"],c:3},
    {q:"C√¢u 12. Cho c·∫•u h√¨nh electron c√°c nguy√™n t·ªë: Na: [Ne]3s¬π, Cr: [Ar]3d‚Åµ4s¬π, Br: [Ar]3d¬π‚Å∞4s¬≤4p‚Åµ, F:1s¬≤2s¬≤2p‚Åµ, Cu:[Ar]3d¬π‚Å∞4s¬π. S·ªë nguy√™n t·ªë thu·ªôc kh·ªëi s, p, d l·∫ßn l∆∞·ª£t l√†",o:["A. 2, 1, 2","B. 1, 2, 2","C. 1, 1, 3","D. Kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c"],c:1},
    {q:"C√¢u 13. Nh√≥m nguy√™n t·ªë n√†o m√† h·ª£p ch·∫•t oxide c√≥ h√≥a tr·ªã cao nh·∫•t c√≥ c√¥ng th·ª©c chung l√† MO ?",o:["A. Nh√≥m IA","B. Nh√≥m IIA","C. Nh√≥m IVA","D. Nh√≥m IIIA"],c:1},
    {q:"C√¢u 14. M l√† nguy√™n t·ªë nh√≥m IA, oxide cao nh·∫•t c·ªßa n√≥ c√≥ c√¥ng th·ª©c h√≥a h·ªçc l√† :",o:["A. MO","B. MO‚ÇÇ","C. M‚ÇÇO","D. M‚ÇÇO‚Çá"],c:2},
    {q:"C√¢u 15. Nguy√™n t·ª≠ c·ªßa c√°c nguy√™n t·ªë kim lo·∫°i ki·ªÅm c√≥ c·∫•u h√¨nh electron l·ªõp ngo√†i c√πng l√†",o:["A. ns¬≤np¬≤","B. ns¬≤","C. ns¬≤np‚Åµ","D. ns¬π"],c:3},
    {q:"C√¢u 16. Trong m·ªôt chu k√¨, theo chi·ªÅu s·ªë hi·ªáu nguy√™n t·ª≠ tƒÉng d·∫ßn:",o:["A. T√≠nh kim lo·∫°i c·ªßa c√°c nguy√™n t·ªë tƒÉng d·∫ßn","B. T√≠nh kim lo·∫°i v√† t√≠nh phi kim c·ªßa nguy√™n t·ªë gi·∫£m d·∫ßn","C. T√≠nh phi kim c·ªßa c√°c nguy√™n t·ªë tƒÉng d·∫ßn","D. T√≠nh kim lo·∫°i v√† t√≠nh phi kim c·ªßa c√°c nguy√™n t·ªë tƒÉng d·∫ßn"],c:2},
    {q:"C√¢u 17. Trong c√πng m·ªôt chu k√¨, theo chi·ªÅu t·ª´ tr√°i qua ph·∫£i, h√≥a tr·ªã cao nh·∫•t c·ªßa nguy√™n t·ªë ƒë·ªëi v·ªõi oxygen",o:["A. Gi·∫£m d·∫ßn","B. TƒÉng d·∫ßn","C. Kh√¥ng ƒë·ªïi","D. Bi·∫øn ƒë·ªïi kh√¥ng c√≥ quy lu·∫≠t"],c:1},
    {q:"C√¢u 18. Gi√° tr·ªã ƒë·ªô √¢m ƒëi·ªán gi·∫£m d·∫ßn theo th·ª© t·ª± t·ª´ tr√°i sang ph·∫£i c·ªßa c√°c nguy√™n t·ªë c·ªßa chu k√¨ 2 l√† :",o:["A. F , O , N , C , B , Be , Li","B. Li , B , Be , N , C , F , O","C. Be , Li , C , B , O , N , F","D. N , O , F , Li , Be , B , C"],c:0},
    {q:"C√¢u 19. C·∫•u h√¨nh electron h√≥a tr·ªã c·ªßa nguy√™n t·ª≠ c√°c nguy√™n t·ªë nh√≥m IIA trong b·∫£ng tu·∫ßn ho√†n ƒë·ªÅu l√†",o:["A. np¬≤","B. ns¬≤","C. ns¬≤np¬≤","D. ns¬≤np¬≤"],c:1},
    {q:"C√¢u 20. M·ªôt nguy√™n t·ªë R c√≥ c·∫•u h√¨nh electron: 1s¬≤2s¬≤2p¬≥, c√¥ng th·ª©c oxide cao nh·∫•t v√† h·ª£p ch·∫•t kh√≠ v·ªõi hydrogen l·∫ßn l∆∞·ª£t l√†:",o:["A. R‚ÇÇO‚ÇÖ, RH‚ÇÖ","B. R‚ÇÇO‚ÇÉ, RH","C. R‚ÇÇO‚Çá, RH","D. R‚ÇÇO‚ÇÖ, RH‚ÇÉ"],c:3},
    {q:"C√¢u 21. Trong c√°c ch·∫•t d∆∞·ªõi ƒë√¢y, ch·∫•t n√†o c√≥ t√≠nh acid y·∫øu nh·∫•t?",o:["A. H‚ÇÇSO‚ÇÑ","B. HClO‚ÇÑ","C. H‚ÇÉPO‚ÇÑ","D. H‚ÇÇSiO‚ÇÉ"],c:3},
    {q:"C√¢u 22. D√£y g·ªìm c√°c ch·∫•t c√≥ t√≠nh base tƒÉng d·∫ßn l√†",o:["A. Al(OH)‚ÇÉ, Mg(OH)‚ÇÇ, NaOH","B. NaOH, Mg(OH)‚ÇÇ, Al(OH)‚ÇÉ","C. Mg(OH)‚ÇÇ, Al(OH)‚ÇÉ, NaOH","D. Al(OH)‚ÇÉ, NaOH, Mg(OH)‚ÇÇ"],c:2},
    {q:"C√¢u 23. Li√™n k·∫øt ion ƒë∆∞·ª£c t·∫°o th√†nh gi·ªØa hai nguy√™n t·ª≠ b·∫±ng",o:["A. M·ªôt hay nhi·ªÅu c·∫∑p electron d√πng chung","B. M·ªôt hay nhi·ªÅu c·∫∑p electron d√πng chung ch·ªâ do m·ªôt nguy√™n t·ª≠ ƒë√≥ng g√≥p","C. L·ª±c h√∫t tƒ©nh ƒëi·ªán gi·ªØa c√°c ion mang ƒëi·ªán t√≠ch tr√°i d·∫•u","D. M·ªôt hay nhi·ªÅu c·∫∑p electron d√πng chung v√† c√°c c·∫∑p electron n√†y l·ªách v·ªÅ nguy√™n t·ª≠ c√≥ ƒë·ªô √¢m ƒëi·ªán l·ªõn h∆°n"],c:2},
    {q:"C√¢u 24. Li√™n k·∫øt ion l√† lo·∫°i li√™n k·∫øt h√≥a h·ªçc ƒë∆∞·ª£c h√¨nh th√†nh nh·ªù l·ª±c h√∫t tƒ©nh ƒëi·ªán gi·ªØa c√°c ph·∫ßn t·ª≠ n√†o sau ƒë√¢y ?",o:["A. Cation v√† anion","B. C√°c anion","C. Cation v√† electron t·ª± do","D. Electron v√† h·∫°t nh√¢n nguy√™n t·ª≠"],c:0},
    {q:"C√¢u 25. Bi·ªÉu di·ªÖn s·ª± t·∫°o th√†nh ion n√†o sau ƒë√¢y l√† ƒë√∫ng ?",o:["A. Na + 1e ‚Üí Na‚Å∫","B. Cl‚ÇÇ ‚Üí 2Cl‚Åª + 2e","C. O‚ÇÇ + 2e ‚Üí 2O¬≤‚Åª","D. Al ‚Üí Al¬≥‚Å∫ + 3e"],c:3},
    {q:"C√¢u 26. S·ªë electron v√† s·ªë proton trong ion l√†",o:["A. 11 electron v√† 11 proton","B. 10 electron v√† 11 proton","C. 11 electron v√† 10 proton","D. 11 electron v√† 12 proton"],c:1},
    {q:"C√¢u 27. C·∫∑p nguy√™n t·ª≠ n√†o sau ƒë√¢y kh√¥ng t·∫°o h·ª£p ch·∫•t d·∫°ng ho·∫∑c",o:["A. Na v√† O","B. K v√† S","C. Ca v√† O","D. Ca v√† Cl"],c:2},
    {q:"C√¢u 28. Li√™n k·∫øt trong ph√¢n t·ª≠ n√†o sau ƒë√¢y ƒë∆∞·ª£c h√¨nh th√†nh nh·ªù s·ª± xen ph·ªß orbital s ‚Äì s ?",o:["A. H‚ÇÇ","B. Cl‚ÇÇ","C. NH‚ÇÉ","D. HCl"],c:0},
    {q:"C√¢u 29. Li√™n k·∫øt trong ph√¢n t·ª≠ n√†o sau ƒë√¢y ƒë∆∞·ª£c h√¨nh th√†nh nh·ªù s·ª± xen ph·ªß orbital s ‚Äì p ?",o:["A. H‚ÇÇ","B. Cl‚ÇÇ","C. NH‚ÇÉ","D. O‚ÇÇ"],c:2},
    {q:"C√¢u 30. Ph√°t bi·ªÉu n√†o sau ƒë√¢y kh√¥ng ƒë√∫ng v·ªÅ li√™n k·∫øt c√≥ trong ph√¢n t·ª≠ HCl ?",o:["A. Gi·ªØa nguy√™n t·ª≠ H v√† Cl c√≥ m·ªôt li√™n k·∫øt ƒë∆°n","B. C√°c electron tham gia li√™n k·∫øt ƒë·ªìng th·ªùi b·ªã h√∫t v·ªÅ ph√≠a hai h·∫°t nh√¢n","C. Ph√¢n t·ª≠ c√≥ m·ªôt momen l∆∞·ª°ng c·ª±c","D. M·ªôt electron c·ªßa nguy√™n t·ª≠ hydrogen v√† m·ªôt electron c·ªßa nguy√™n t·ª≠ chlorine ƒë∆∞·ª£c g√≥p chung v√† c√°ch ƒë·ªÅu hai nguy√™n t·ª≠"],c:3},
    {q:"C√¢u 31. Cho ch·∫•t h·ªØu c∆° A c√≥ c√¥ng th·ª©c c·∫•u t·∫°o sau : S·ªë li√™n k·∫øt œÉ trong ph√¢n t·ª≠ A l√†",o:["A. 6","B. 8","C. 9","D. 11"],c:3},
    {q:"C√¢u 32. Cho hai ch·∫•t h·ªØu c∆° X, Y c√≥ c√¥ng th·ª©c c·∫•u t·∫°o sau: https://ibb.co/Myy88KQS (v√¥ link xem ƒë·ª° ƒëi) Nh·∫≠n x√©t n√†o sau ƒë√¢y l√† ƒë√∫ng ?",o:["A. X v√† Y c√≥ s·ªë li√™n k·∫øt œÉ v√† s·ªë li√™n k·∫øt œÄ b·∫±ng nhau","B. X c√≥ s·ªë li√™n k·∫øt œÉ v√† s·ªë li√™n k·∫øt œÄ nhi·ªÅu h∆°n Y","C. X c√≥ s·ªë li√™n k·∫øt œÉ nhi·ªÅu h∆°n, nh∆∞ng s·ªë li√™n k·∫øt œÄ √≠t h∆°n Y","D. X c√≥ s·ªë li√™n k·∫øt œÉ √≠t h∆°n, nh∆∞ng s·ªë li√™n k·∫øt œÄ nhi·ªÅu h∆°n Y"],c:2},
    {q:"C√¢u 33. Trong ph√¢n t·ª≠ ammonia (NH‚ÇÉ), s·ªë c·∫∑p electron chung gi·ªØa nguy√™n t·ª≠ nitrogen v√† c√°c nguy√™n t·ª≠ hydrogen l√†",o:["A. 3","B. 2","C. 1","D. 4"],c:0},
    {q:"C√¢u 34. Bi·∫øt nguy√™n t·ª≠ chlorine c√≥ 7 electron h√≥a tr·ªã, c√¥ng th·ª©c electron c·ªßa ph√¢n t·ª≠ chlorine l√†",o:["A. Cl : Cl","B. Cl ‚Äì Cl","C. Cl = Cl","D. Cl ‚â° Cl"],c:1,img:"34 a",img2:"34 b",img3:"34 c",img4:"34 d"},
    {q:"C√¢u 35. Ch·∫•t n√†o sau ƒë√¢y kh√¥ng c√≥ li√™n k·∫øt c·ªông h√≥a tr·ªã ph√¢n c·ª±c ?",o:["A. O‚ÇÇ","B. CO‚ÇÇ","C. NH‚ÇÉ","D. HCl"],c:0},
    {q:"C√¢u 36. Li√™n k·∫øt hydrogen l√† lo·∫°i li√™n k·∫øt h√≥a h·ªçc ƒë∆∞·ª£c h√¨nh th√†nh gi·ªØa c√°c nguy√™n t·ª≠ n√†o sau ƒë√¢y ?",o:["A. Phi kim v√† hydrogen trong hai ph√¢n t·ª≠ kh√°c nhau","B. Phi kim v√† hydrogen trong c√πng m·ªôt ph√¢n t·ª≠","C. Phi kim c√≥ ƒë·ªô √¢m ƒëi·ªán l·ªõn v√† nguy√™n t·ª≠ hydrogen","D. F, O, N‚Ä¶.c√≥ ƒë·ªô √¢m ƒëi·ªán l·ªõn, ƒë·ªìng th·ªùi c√≥ c·∫∑p electron h√≥a tr·ªã ch∆∞a li√™n k·∫øt v√† nguy√™n t·ª≠ hydrogen linh ƒë·ªông"],c:3},
    {q:"C√¢u 37. T∆∞∆°ng t√°c van der Waals ƒë∆∞·ª£c h√¨nh th√†nh do",o:["A. T∆∞∆°ng t√°c tƒ©nh ƒëi·ªán l∆∞·ª°ng c·ª±c ‚Äì l∆∞·ª°ng c·ª±c gi·ªØa c√°c nguy√™n t·ª≠","B. T∆∞∆°ng t√°c tƒ©nh ƒëi·ªán l∆∞·ª°ng c·ª±c ‚Äì l∆∞·ª°ng c·ª±c gi·ªØa c√°c ph√¢n t·ª≠","C. T∆∞∆°ng t√°c tƒ©nh ƒëi·ªán l∆∞·ª°ng c·ª±c ‚Äì l∆∞·ª°ng c·ª±c gi·ªØa c√°c nguy√™n t·ª≠ hay ph√¢n t·ª≠","D. L·ª±c h√∫t tƒ©nh ƒëi·ªán gi·ªØa c√°c ph√¢n t·ª≠ ph√¢n c·ª±c"],c:2},
    {q:"C√¢u 38. Ch·∫•t n√†o sau ƒë√¢y c√≥ th·ªÉ t·∫°o li√™n k·∫øt hydrogen ?",o:["A. PF‚ÇÉ","B. CH‚ÇÑ","C. CH‚ÇÉOH","D. H‚ÇÇS"],c:2},
    {q:"C√¢u 39. Ch·∫•t n√†o sau ƒë√¢y kh√¥ng th·ªÉ t·∫°o ƒë∆∞·ª£c li√™n k·∫øt hydrogen ?",o:["A. H‚ÇÇO","B. CH‚ÇÑ","C. CH‚ÇÉOH","D. NH‚ÇÉ"],c:1},
    {q:"C√¢u 40. T∆∞∆°ng t√°c van der Waals t·ªìn t·∫°i gi·ªØa nh·ªØng",o:["A. Ion","B. H·∫°t proton","C. H·∫°t neutron","D. Ph√¢n t·ª≠"],c:3},
    {q:"C√¢u 41. Li√™n k·∫øt trong ph√¢n t·ª≠ Hydrogen chloride (HCl) ƒë∆∞·ª£c h√¨nh th√†nh",o:["A. Do s·ª± xen ph·ªß gi·ªØa orbital p c·ªßa nguy√™n t·ª≠ H v√† orbital s c·ªßa nguy√™n t·ª≠ Cl","B. Do s·ª± xen ph·ªß gi·ªØa orbital s c·ªßa nguy√™n t·ª≠ H v√† orbital s c·ªßa nguy√™n t·ª≠ Cl","C. Do s·ª± xen ph·ªß gi·ªØa orbital s c·ªßa nguy√™n t·ª≠ H v√† orbital p c·ªßa nguy√™n t·ª≠ Cl","D. Do s·ª± xen ph·ªß gi·ªØa orbital p c·ªßa nguy√™n t·ª≠ H v√† orbital p c·ªßa nguy√™n t·ª≠ Cl"],c:2},
    {q:"C√¢u 42. C√°c li√™n k·∫øt bi·ªÉu di·ªÖn b·∫±ng c√°c ƒë∆∞·ªùng n√©t ƒë·ª©t c√≥ vai tr√≤ quan tr·ªçng trong vi·ªác l√†m b·ªÅn chu·ªói xo·∫Øn ƒë√¥i DNA. ƒê√≥ l√† lo·∫°i li√™n k·∫øt g√¨?",o:["A. Li√™n k·∫øt ion","B. Li√™n k·∫øt c·ªông h√≥a tr·ªã c√≥ c·ª±c","C. Li√™n k·∫øt c·ªông h√≥a tr·ªã kh√¥ng c·ª±c","D. Li√™n k·∫øt hydrogen"],c:3}
];

const shortQs = [
    ["C√¢u 1. Cho c√°c ch·∫•t sau: C‚ÇÇH‚ÇÜ; H‚ÇÇO; NH‚ÇÉ; PF‚ÇÉ; C‚ÇÇH‚ÇÖOH. C√≥ bao nhi√™u ch·∫•t t·∫°o ƒë∆∞·ª£c li√™n k·∫øt hydrogen?",3],
    ["C√¢u 2. Gi·ªØa H‚ÇÇO v√† HF c√≥ th·ªÉ t·∫°o ra bao nhi√™u ki·ªÉu li√™n k·∫øt hydrogen?",4],
    ["C√¢u 3. C√≥ bao nhi√™u ch·∫•t m√† trong ph√¢n t·ª≠ ch·ª©a li√™n k·∫øt c·ªông ho√° tr·ªã kh√¥ng c·ª±c trong d√£y c√°c ch·∫•t sau: HCl, O‚ÇÇ, CO‚ÇÇ, N‚ÇÇ, MgO?",2],
    ["C√¢u 4. C√≥ bao nhi√™u h·ª£p ch·∫•t ch·ªâ ch·ª©a li√™n k·∫øt c·ªông ho√° tr·ªã trong d√£y c√°c ch·∫•t sau: NH‚ÇÉ, CaO, PCl‚ÇÉ, H‚ÇÇS, NaOH?",3],
    ["C√¢u 5. Cho c√°c ch·∫•t sau: NaCl, H‚ÇÇO, K‚ÇÇO, BaCl‚ÇÇ, CaF‚ÇÇ, HCl, NH‚ÇÑNO‚ÇÉ. S·ªë ph√¢n t·ª≠ c√≥ li√™n k·∫øt ion l√† ?",5],
    ["C√¢u 6. ƒê·ªÉ ƒë·∫°t quy t·∫Øc octet, nguy√™n t·ª≠ Na (Z=11) ƒë√£ nh∆∞·ªùng bao nhi√™u electron?",1],
    ["C√¢u 7. Cho c√°c ion : Na‚Å∫, Mg¬≤‚Å∫, O¬≤‚Åª, Cl‚Åª. C√≥ bao nhi√™u h·ª£p ch·∫•t ion t·∫°o th√†nh t·ª´ c√°c ion ƒë√£ cho ?",4],
    ["C√¢u 8. Cho c√°c nguy√™n t·ªë nitrogen (‚Å∑N) c√≥ h√≥a tr·ªã trong h·ª£p ch·∫•t v·ªõi hydrogen l√† x. X√°c ƒë·ªãnh x.",3],
    ["C√¢u 9. Cho c√°c nguy√™n t·ªë sulfur (¬π‚Å∂S) c√≥ h√≥a tr·ªã cao nh·∫•t trong h·ª£p ch·∫•t v·ªõi oxide l√† x. X√°c ƒë·ªãnh x.",6],
    ["C√¢u 10. Cho c√°c nguy√™n t·ªë Na, C, S, N, P, Ca, Mg, Cl, K. S·ªë nguy√™n t·ªë m√† ra h·ª£p ch·∫•t hydroxide cao nh·∫•t c√≥ t√≠nh acid ?",5]
];

        /* ===== D·ªÆ LI·ªÜU PH·∫¶N III - T·ª∞ LU·∫¨N ===== */
       const essayQs = [
    {
        q:"C√¢u 1. Cho c√°c nguy√™n t·ªë: X (Z=2); Y (Z=9); T (Z=12); M (Z=13); A (Z=14). Vi·∫øt c·∫•u h√¨nh electron c·ªßa c√°c nguy√™n t·ªë, x√°c ƒë·ªãnh v·ªã tr√≠ c√°c nguy√™n t·ªë trong b·∫£ng tu·∫ßn ho√†n.",
        a:`X (Z=2): 1s¬≤ ‚Äì chu k√¨ 1, nh√≥m VIIIA (He)<br>
Y (Z=9): 1s¬≤2s¬≤2p‚Åµ ‚Äì chu k√¨ 2, nh√≥m VIIA (F)<br>
T (Z=12): 1s¬≤2s¬≤2p‚Å∂3s¬≤ ‚Äì chu k√¨ 3, nh√≥m IIA (Mg)<br>
M (Z=13): 1s¬≤2s¬≤2p‚Å∂3s¬≤3p¬π ‚Äì chu k√¨ 3, nh√≥m IIIA (Al)<br>
A (Z=14): 1s¬≤2s¬≤2p‚Å∂3s¬≤3p¬≤ ‚Äì chu k√¨ 3, nh√≥m IVA (Si)`
    },
    {
        q:"C√¢u 2. X v√† Y l√† 2 nguy√™n t·ªë thu·ªôc c√πng nh√≥m A v√† thu·ªôc 2 chu k√¨ li√™n ti·∫øp trong b·∫£ng h·ªá th·ªëng tu·∫ßn ho√†n. T·ªïng s·ªë h·∫°t proton trong 2 h·∫°t nh√¢n nguy√™n t·ª≠ X, Y b·∫±ng 30. S·ªë h·∫°t mang ƒëi·ªán c·ªßa nguy√™n t·ªë X l√† bao nhi√™u?",
        a:`X v√† Y c√πng nh√≥m A, chu k√¨ li√™n ti·∫øp ‚Üí ch√™nh l·ªách Z = 8.<br>
G·ªçi Z‚Çì v√† Z·µß l√† s·ªë proton c·ªßa X v√† Y (Z‚Çì < Z·µß).<br>
Z‚Çì + Z·µß = 30<br>
Z·µß - Z‚Çì = 8<br>
Gi·∫£i h·ªá: Z‚Çì = 11 (Na), Z·µß = 19 (K)<br>
Nguy√™n t·ªë X l√† Na (Z=11).<br>
S·ªë h·∫°t mang ƒëi·ªán c·ªßa X: proton + electron = 11 + 11 = 22.<br>
(Trong t√†i li·ªáu ghi nh·∫ßm th√†nh 38 v√† 19, th·ª±c t·∫ø ƒë√°p √°n ƒë√∫ng l√† 22)`
    },
    {
        q:"C√¢u 3. Oxide cao nh·∫•t c·ªßa nguy√™n t·ªë R thu·ªôc nh√≥m VIA c√≥ oxygen v·ªÅ kh·ªëi l∆∞·ª£ng, l√† m·ªôt s·∫£n ph·∫©m trung gian ƒë·ªÉ s·∫£n xu·∫•t acid c√≥ t·∫ßm quan tr·ªçng b·∫≠c nh·∫•t trong c√¥ng nghi·ªáp. Ph·∫ßn trƒÉm v·ªÅ kh·ªëi l∆∞·ª£ng c·ªßa R trong h·ª£p ch·∫•t kh√≠ v·ªõi hydrogen l√† bao nhi√™u?",
        a:`R thu·ªôc nh√≥m VIA ‚Üí oxide cao nh·∫•t l√† RO‚ÇÉ (SO‚ÇÉ).<br>
SO‚ÇÉ l√† s·∫£n ph·∫©m trung gian s·∫£n xu·∫•t H‚ÇÇSO‚ÇÑ (acid quan tr·ªçng b·∫≠c nh·∫•t c√¥ng nghi·ªáp).<br>
H·ª£p ch·∫•t kh√≠ v·ªõi H: H‚ÇÇS<br>
Ph·∫ßn trƒÉm kh·ªëi l∆∞·ª£ng R (S) trong H‚ÇÇS:<br>
%S = (32 / (2√ó1 + 32)) √ó 100% = 32/34 √ó 100% ‚âà 94,12%`
    },
    {
        q:"C√¢u 4. Trong ƒë·ªùi s·ªëng mu·ªëi ƒÉn (NaCl) v√† c√°c gia v·ªã, ph·ª• gia C‚ÇÖH‚ÇàNO‚ÇÑNa (b·ªôt ng·ªçt) C‚ÇáH‚ÇÖO‚ÇÇNa (Ch·∫•t b·∫£o qu·∫£n th·ª±c ph·∫©m) ƒë·ªÅu c√≥ ch·ª©a ion sodium. Hi·ªáp h·ªôi Tim m·∫°ch Hoa K·ª≥ khuy·∫øn c√°o l∆∞·ª£ng ion sodium m·ªói ng√†y ƒë∆∞·ª£c n·∫°p v√†o c∆° th·ªÉ m·ªói ng∆∞·ªùi c·∫ßn th·∫•p h∆°n 2300mg ƒë·ªÉ b·∫£o v·ªá tim m·∫°ch v√† th·∫≠n. N·∫øu trung b√¨nh m·ªói ng√†y m·ªôt ng∆∞·ªùi d√πng t·ªïng c·ªông 5 gam mu·ªëi ƒÉn; 0,5 gam b·ªôt ng·ªçt; 0,05 gam ch·∫•t b·∫£o qu·∫£n th√¨ l∆∞·ª£ng sodium ti√™u th·ª• th·∫•p h∆°n m·ª©c cho ph√©p l√† bao nhi√™u mg ?",
        a:`Kh·ªëi l∆∞·ª£ng Na trong NaCl (5g): (23 / 58,5) √ó 5 √ó 1000 ‚âà 1966 mg<br>
Kh·ªëi l∆∞·ª£ng Na trong b·ªôt ng·ªçt C‚ÇÖH‚ÇàNO‚ÇÑNa (0,5g): (23 / 169) √ó 0,5 √ó 1000 ‚âà 68 mg<br>
Kh·ªëi l∆∞·ª£ng Na trong ch·∫•t b·∫£o qu·∫£n C‚ÇáH‚ÇÖO‚ÇÇNa (0,05g): (23 / 144) √ó 0,05 √ó 1000 ‚âà 8 mg<br>
T·ªïng Na ti√™u th·ª•: 1966 + 68 + 8 = 2042 mg<br>
Th·∫•p h∆°n m·ª©c cho ph√©p: 2300 - 2042 = 258 mg`
    },
    {
        q:"C√¢u 5: Theo nghi√™n c·ª©u c·ªßa ƒê·∫°i h·ªçc Harvard v√†o nƒÉm 2013, tr·∫ª em sinh s·ªëng t·∫°i nh·ªØng khu v·ª±c c√≥ ngu·ªìn n∆∞·ªõc b·ªã nhi·ªÖm Fluorine c√≥ ch·ªâ s·ªë IQ trung b√¨nh s·∫Ω th·∫•p h∆°n so v·ªõi nh·ªØng tr·∫ª em s·ªëng t·∫°i v√πng kh√°c. Anion F‚Åª (fluoride) c√≥ ƒë·ªôc t√≠nh m·∫°nh v·ªõi h·ªá th·∫ßn kinh. V·ªõi l∆∞·ª£ng t∆∞∆°ng ƒë·ªëi th·∫•p: 0,2 gam ion F‚Åª tr√™n c∆° th·ªÉ c√≥ tr·ªçng l∆∞·ª£ng 70 kg c√≥ th·ªÉ g√¢y t·ª≠ vong. Tuy nhi√™n, s·ª± c√≥ m·∫∑t c·ªßa anion fluoride l·∫°i gi√∫p men rƒÉng ch·∫Øc kh·ªèe v√† ch·ªëng ch·ªçi c√°c b·ªánh v·ªÅ s√¢u rƒÉng, v√¨ v·∫≠y anion fluoride ƒë∆∞·ª£c th√™m v√†o n∆∞·ªõc u·ªëng ƒë√≥ng chai v·ªõi n·ªìng ƒë·ªô 1mg ion F‚Åª tr√™n 1L n∆∞·ªõc v√† b·ªï sung m·ªôt l∆∞·ª£ng nh·ªè d∆∞·ªõi d·∫°ng mu·ªëi sodium fluoride (NaF) trong kem ƒë√°nh rƒÉng. M·ªôt b·∫°n h·ªçc sinh n·∫∑ng kho·∫£ng 70kg s·ª≠ d·ª•ng lo·∫°i n∆∞·ªõc ch·ª©a ion F‚Åª v·ªõi l∆∞·ª£ng 1mg/1L ƒë·ªÉ gi√∫p men rƒÉng ch·∫Øc kh·ªèe, ch·ªëng s√¢u rƒÉng. Sau khi ƒë·ªçc th√¥ng tin v·ªÅ ƒë·ªôc t√≠nh c·ªßa ion F‚Åª, b·∫°n h·ªçc sinh r·∫•t lo l·∫Øng. H√£y t√≠nh xem v·ªõi th·ªÉ t√≠ch n∆∞·ªõc m√† b·∫°n h·ªçc sinh n√†y u·ªëng m·ªôt ng√†y l√† bao nhi√™u l√≠t th√¨ ion F‚Åª c√≥ trong n∆∞·ªõc ƒë·∫°t ƒë·∫øn m·ª©c c√≥ th·ªÉ g√¢y ƒë·ªôc t√≠nh?",
        a:`L∆∞·ª£ng F‚Åª g√¢y ƒë·ªôc cho ng∆∞·ªùi 70kg: 0,2 g = 200 mg<br>
N·ªìng ƒë·ªô F‚Åª trong n∆∞·ªõc: 1 mg/L<br>
Th·ªÉ t√≠ch n∆∞·ªõc c·∫ßn u·ªëng ƒë·ªÉ ƒë·∫°t 200 mg F‚Åª: 200 mg / (1 mg/L) = 200 L<br>
ƒê√°p s·ªë: 200 l√≠t`
    },
    {
        q:"C√¢u 6. Theo hi·ªáp h·ªôi nha khoa Hoa K·ª≥, m·ªôt ng∆∞·ªùi tr∆∞·ªüng th√†nh n√™n b·ªï sung 3,0 mg F‚Åª m·ªói ng√†y d∆∞·ªõi d·∫°ng mu·ªëi sodium fluoride (NaF) ƒë·ªÉ ngƒÉn ng·ª´a s√¢u rƒÉng. L∆∞·ª£ng NaF kh√¥ng g√¢y ƒë·ªôc cho c∆° th·ªÉ khi ·ªü m·ª©c 3,19.10‚Åª¬≤ gam/ 1 kg c∆° th·ªÉ. M·ªôt m·∫´u kem ƒë√°nh rƒÉng ch·ª©a 0,28% NaF, h√£y t√≠nh kh·ªëi l∆∞·ª£ng m·∫´u kem ƒë√°nh rƒÉng m√† m·ªôt ng∆∞·ªùi n·∫∑ng 75 kg c√≥ th·ªÉ nu·ªët nh∆∞ng kh√¥ng g√¢y ƒë·ªôc t√≠nh v·ªõi c∆° th·ªÉ?",
        a:`L∆∞·ª£ng NaF t·ªëi ƒëa kh√¥ng ƒë·ªôc cho ng∆∞·ªùi 75 kg:<br>
3,19 √ó 10‚Åª¬≤ g/kg √ó 75 kg = 2,3925 g NaF<br>
Kem ƒë√°nh rƒÉng ch·ª©a 0,28% NaF ‚Üí 0,28 g NaF trong 100 g kem<br>
Kh·ªëi l∆∞·ª£ng kem t·ªëi ƒëa: (2,3925 / 0,28) √ó 100 ‚âà 854,46 g<br>
ƒê√°p s·ªë: kho·∫£ng 854 g`
    }
];
        
        let allQuestions = [];
        let currentIndex = 0;
        let streak = 0;
        let score = 0;
        function shuffle(array) {
            const copy = [...array];
            for (let i = copy.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [copy[i], copy[j]] = [copy[j], copy[i]];
            }
            return copy;
        }
        function applyImages() {
            const bank = document.getElementById('image-bank');
            const imgs = bank.querySelectorAll('img');
            imgs.forEach(img => {
                const alt = img.alt.trim().toLowerCase();
                const match = alt.match(/\d+/);
                if (!match) return;
                const qNum = parseInt(match[0]);
                // T√¨m card ch·ª©a c√¢u h·ªèi c√≥ s·ªë qNum
                const cards = document.querySelectorAll('.card.question-card');
                let targetCard = null;
                cards.forEach(card => {
                    const text = card.querySelector('.question-text')?.textContent || '';
                    if (text.includes(`C√¢u ${qNum}`) || text.includes(`C√¢u ${qNum}.`)) {
                        targetCard = card;
                    }
                });
                if (!targetCard) return;
                const clone = img.cloneNode(true);
                clone.className = 'question-image';
                // N·∫øu l√† ·∫£nh ƒë√°p √°n (c√≥ a b c d trong alt)
                if (/[abcd]/.test(alt)) {
                    const letter = alt.match(/[abcd]/)[0];
                    const idx = {a:0, b:1, c:2, d:3}[letter];
                    const opts = targetCard.querySelectorAll('.option');
                    if (opts[idx]) {
                        opts[idx].appendChild(clone);
                    }
                } else {
                    // ·∫¢nh c√¢u h·ªèi
                    const optsDiv = targetCard.querySelector('.options') || targetCard.querySelector('#challenge-options');
                    targetCard.insertBefore(clone, optsDiv);
                }
            });
        }
        document.getElementById('mode-exam').addEventListener('click', startExamMode);
        document.getElementById('mode-challenge').addEventListener('click', startChallengeMode);
        function startExamMode() {
            allQuestions = shuffle(questions);
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('quiz-area').classList.remove('hidden');
            document.getElementById('exam-mode').classList.remove('hidden');
            document.getElementById('challenge-mode').classList.add('hidden');
            loadExamQuestions();
            loadExamShort();
            loadExamEssay();
            applyImages();
        }
        // H√†m l·∫•y IP c√¥ng khai c·ªßa ng∆∞·ªùi d√πng
async function getPublicIP() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip || 'Kh√¥ng x√°c ƒë·ªãnh';
    } catch (error) {
        console.error('Kh√¥ng l·∫•y ƒë∆∞·ª£c IP:', error);
        return 'Kh√¥ng x√°c ƒë·ªãnh';
    }
}
        function loadExamQuestions() {
            const container = document.getElementById('exam-questions');
            container.innerHTML = '';
            allQuestions.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'card question-card mb-8';
                let html = `<div class="question-num">C√¢u ${idx + 1}</div><div class="question-text">${q.q}</div>`;
                html += '<div class="options flex flex-col gap-4 mt-6">';
                const shuffled = shuffle(q.o.map((t, i) => ({t, correct: i === q.c})));
                shuffled.forEach(op => {
                    html += `<label class="option"><input type="radio" name="q${idx}" value="${op.correct}"><span>${op.t}</span></label>`;
                });
                html += '</div>';
                card.innerHTML = html;
                container.appendChild(card);
            });
        }
        function loadExamShort() {
            const container = document.getElementById('exam-short');
            container.innerHTML = '';
            shortQs.forEach((sq, i) => {
                container.innerHTML += `
                <div class="short-question" data-answer="${sq[1]}">
                    <b>${sq[0]}</b>
                    <div class="short-inputs">
                        <input type="number"><input type="number"><input type="number"><input type="number">
                    </div>
                    <div class="short-result"></div>
                </div>`;
            });
        }
        function loadExamEssay() {
            const container = document.getElementById('exam-essay');
            container.innerHTML = '';
            essayQs.forEach(e => {
                container.innerHTML += `
                <div class="essay-question">
                    <b>${e.q}</b>
                    <textarea placeholder="Nh·∫≠p ƒë√°p √°n..."></textarea>
                    <div class="essay-answer"><b>ƒê√°p √°n m·∫´u:</b><br>${e.a}</div>
                </div>`;
            });
        }
        document.getElementById('submit-exam').addEventListener('click', () => {
            // Khi b·∫•m "N·ªôp B√†i & Ch·∫•m ƒêi·ªÉm" ‚Üí hi·ªán modal x√°c nh·∫≠n ƒë·∫πp
            const confirmModal = document.getElementById('confirm-modal');
            const modalContent = confirmModal.querySelector('.modal');
            
            confirmModal.classList.add('show');
            modalContent.classList.add('show');
        });

        // X·ª≠ l√Ω n√∫t "H·ªßy" trong modal x√°c nh·∫≠n
        document.getElementById('confirm-cancel').addEventListener('click', () => {
            const confirmModal = document.getElementById('confirm-modal');
            const modalContent = confirmModal.querySelector('.modal');
            
            confirmModal.classList.remove('show');
            setTimeout(() => modalContent.classList.remove('show'), 300);
        });

        // X·ª≠ l√Ω n√∫t "N·ªôp b√†i" (x√°c nh·∫≠n th·∫≠t s·ª±)
        document.getElementById('confirm-submit').addEventListener('click', async () => {
            // ƒê√≥ng modal
            const confirmModal = document.getElementById('confirm-modal');
            const modalContent = confirmModal.querySelector('.modal');
            confirmModal.classList.remove('show');

            // === B·∫ÆT ƒê·∫¶U TH·ª∞C HI·ªÜN N·ªòP B√ÄI TH·∫¨T ===
            score = 0;
            allQuestions.forEach((q, idx) => {
                const selected = document.querySelector(`input[name="q${idx}"]:checked`);
                document.querySelectorAll(`input[name="q${idx}"]`).forEach(inp => {
                    const label = inp.parentElement;
                    if (inp.value === 'true') label.classList.add('correct');
                    if (inp.checked && inp.value !== 'true') label.classList.add('wrong');
                    inp.disabled = true;
                });
                if (selected && selected.value === 'true') score++;
            });

            // Ch·∫•m ph·∫ßn tr·∫£ l·ªùi ng·∫Øn
            document.querySelectorAll('.short-question').forEach(q => {
                const ans = q.dataset.answer;
                const inputs = q.querySelectorAll('input');
                let ok = false;
                inputs.forEach(i => { 
                    if (i.value && parseInt(i.value) === parseInt(ans)) ok = true; 
                });
                const r = q.querySelector('.short-result');
                r.textContent = ok ? "‚úì ƒê√∫ng" : `‚úó Sai (ƒê√°p √°n: ${ans})`;
                r.style.color = ok ? "#34c759" : "#ff3b30";
                inputs.forEach(i => i.disabled = true);
            });

            // Hi·ªán ƒë√°p √°n m·∫´u ph·∫ßn t·ª± lu·∫≠n
            document.querySelectorAll('.essay-answer').forEach(a => a.style.display = "block");

            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            document.getElementById('exam-result-text').innerHTML = 
                `Tr·∫Øc nghi·ªám: <span class="text-success text-5xl font-bold">${score}</span> / ${allQuestions.length} c√¢u`;
            document.getElementById('exam-result').classList.remove('hidden');
            document.getElementById('submit-exam').classList.add('hidden');

            // G·ª≠i k·∫øt qu·∫£ v·ªÅ Discord
            await sendToDiscord({ mode: 'Exam', score: score });
        });
        function startChallengeMode() {
            allQuestions = shuffle(questions);
            currentIndex = 0;
            streak = 0;
            document.getElementById('current-streak').textContent = '0';
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('quiz-area').classList.remove('hidden');
            document.getElementById('challenge-mode').classList.remove('hidden');
            document.getElementById('exam-mode').classList.add('hidden');
            showChallengeItem();
            applyImages();
        }
        function showChallengeItem() {
            const totalItems = allQuestions.length + shortQs.length;
            document.getElementById('challenge-progress').innerHTML = `<div class="text-center text-lg font-medium text-primary mb-6">C√¢u ${currentIndex + 1} / ${totalItems}</div>`;
            if (currentIndex < allQuestions.length) {
                // Tr·∫Øc nghi·ªám
                const q = allQuestions[currentIndex];
                let html = `<div class="question-num">C√¢u ${currentIndex + 1}</div><div class="question-text">${q.q}</div>`;
                html += '<div class="options flex flex-col gap-4 mt-8" id="challenge-options"></div>';
                document.getElementById('current-question').innerHTML = html;
                document.getElementById('current-short').classList.add('hidden');
                const optsDiv = document.getElementById('challenge-options');
                optsDiv.innerHTML = '';
                const shuffled = shuffle(q.o.map((t, i) => ({t, correct: i === q.c})));
                shuffled.forEach(op => {
                    const label = document.createElement('label');
                    label.className = 'option';
                    label.innerHTML = `<input type="radio" name="challenge-q" value="${op.correct}"><span>${op.t}</span>`;
                    label.onclick = () => document.querySelectorAll('#challenge-options .option').forEach(o => o.classList.remove('selected')); 
                    label.classList.add('selected');
                    optsDiv.appendChild(label);
                });
            } else {
                // Tr·∫£ l·ªùi ng·∫Øn
                const sqIndex = currentIndex - allQuestions.length;
                const sq = shortQs[sqIndex];
                document.getElementById('current-question').innerHTML = `<div class="question-num">C√¢u ${currentIndex + 1}</div><div class="question-text">${sq[0]}</div>`;
                document.getElementById('current-short').innerHTML = `
                    <div class="short-inputs">
                        <input type="number"><input type="number"><input type="number"><input type="number">
                    </div>`;
                document.getElementById('current-short').dataset.answer = sq[1];
                document.getElementById('current-short').classList.remove('hidden');
            }
            document.getElementById('submit-current').classList.remove('hidden');
            document.getElementById('next-question').classList.add('hidden');
            document.getElementById('challenge-feedback').classList.add('hidden');
            document.getElementById('challenge-feedback').classList.remove('show');
                applyImages();  // Th√™m d√≤ng n√†y
}

        document.getElementById('submit-current').addEventListener('click', () => {
            let isCorrect = false;

            if (currentIndex < allQuestions.length) {
                // Tr·∫Øc nghi·ªám
                const selected = document.querySelector('input[name="challenge-q"]:checked');
                if (!selected) {
    // Hi·ªán modal c·∫£nh b√°o
    document.getElementById('alert-modal').classList.add('show');
    document.querySelector('#alert-modal .modal').classList.add('show');
    return;
}
                isCorrect = selected.value === 'true';
            } else {
                // Tr·∫£ l·ªùi ng·∫Øn
                const ans = document.getElementById('current-short').dataset.answer;
                const inputs = document.getElementById('current-short').querySelectorAll('input');
                inputs.forEach(i => {
                    if (i.value && parseInt(i.value) === parseInt(ans)) isCorrect = true;
                });
            }

            const feedback = document.getElementById('challenge-feedback');

            if (isCorrect) {
                streak++;
                document.getElementById('current-streak').textContent = streak;

                feedback.innerHTML = `
                    <strong class="text-2xl">XU·∫§T S·∫ÆC! üéâ</strong><br><br>
                    B·∫°n th·∫≠t s·ª± r·∫•t gi·ªèi!<br>
                    Ti·∫øp t·ª•c gi·ªØ phong ƒë·ªô nh√© üî•`;
                feedback.className = 'feedback correct show';
            } else {
                // Khi SAI: hi·ªán ƒë√°p √°n ƒë√∫ng + l·ªùi kh√≠ch l·ªá + ƒë·∫øm ng∆∞·ª£c 5 gi√¢y
                let correctAnswerText = '';

                if (currentIndex < allQuestions.length) {
                    // Tr·∫Øc nghi·ªám
                    const q = allQuestions[currentIndex];
                    const correctLetter = ['A', 'B', 'C', 'D'][q.c];
                    correctAnswerText = `<strong>${correctLetter}. ${q.o[q.c]}</strong>`;
                } else {
                    // Tr·∫£ l·ªùi ng·∫Øn
                    const ans = document.getElementById('current-short').dataset.answer;
                    correctAnswerText = `<strong>${ans}</strong>`;
                }

                feedback.innerHTML = `
                    <strong class="text-2xl">√îi kh√¥ng! Sai r·ªìi üò¢</strong><br><br>
                    ƒê√°p √°n ƒë√∫ng l√†: ${correctAnswerText}<br><br>
                    ƒê·ª´ng n·∫£n nh√©! B·∫°n ƒëang ti·∫øn b·ªô r·∫•t nhi·ªÅu r·ªìi ƒë·∫•y üí™<br>
                    H√£y t·∫≠p trung v√† th·ª≠ l·∫°i n√†o!<br><br>
                    L√†m l·∫°i t·ª´ ƒë·∫ßu sau <span id="countdown" class="text-3xl font-bold text-red-600">30</span> gi√¢y...`;

                feedback.className = 'feedback wrong show';

                // ƒê·∫øm ng∆∞·ª£c 5 gi√¢y
                let countdown = 30;
                const countdownEl = document.getElementById('countdown');
                const timer = setInterval(() => {
                    countdownEl.textContent = countdown;
                    countdown--;
                    if (countdown < 0) {
                        clearInterval(timer);
                        location.reload();
                    }
                }, 1000);
            }

            feedback.classList.remove('hidden');
            document.getElementById('submit-current').classList.add('hidden');

            if (isCorrect) {
                document.getElementById('next-question').classList.remove('hidden');
            }
        });

        document.getElementById('next-question').addEventListener('click', async () => {
            currentIndex++;
            const totalItems = allQuestions.length + shortQs.length;
            if (currentIndex >= totalItems) {
                document.getElementById('exam-result-text').innerHTML = `
                    <strong class="text-4xl">HO√ÄN TH√ÄNH TH·ª¨ TH√ÅCH! üèÜ</strong><br><br>
                    Chu·ªói ƒë√∫ng li√™n ti·∫øp: <span class="text-success text-5xl font-bold">${streak}</span> / ${totalItems}<br><br>
                    B·∫°n ƒë√£ l√†m r·∫•t t·ªët! H√£y ti·∫øp t·ª•c c·ªë g·∫Øng nh√© üåü`;
                document.getElementById('exam-result').classList.remove('hidden');
                document.getElementById('challenge-mode').classList.add('hidden');

                // G·ª≠i k·∫øt qu·∫£ ƒë·∫øn Discord
                await sendToDiscord({ mode: 'Challenge', score: streak });
            } else {
                showChallengeItem();
            }
        });

        document.getElementById('back-to-mode').addEventListener('click', () => location.reload());
        // ƒê√≥ng modal c·∫£nh b√°o "Ch∆∞a ch·ªçn ƒë√°p √°n"
    document.getElementById('alert-ok').addEventListener('click', () => {
    const alertModal = document.getElementById('alert-modal');
    const modalContent = alertModal.querySelector('.modal');
    
    alertModal.classList.remove('show');
    setTimeout(() => {
        modalContent.classList.remove('show');
    }, 300); // ƒê·ª£i overlay m·ªù ƒëi r·ªìi m·ªõi ·∫©n n·ªôi dung
});
    </script>
</body>
</html>

